id: io.github.cjonas1999.overbind
runtime: org.gnome.Platform
runtime-version: '49'
sdk: org.gnome.Sdk

command: OverBind
finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --share=network
  - --share=ipc
  - --device=all


modules:
  - name: binary
    buildsystem: simple
    sources:
      - type: file
        url: https://github.com/cjonas1999/OverBind/releases/download/1.5.1/OverBind_1.5.1_amd64.deb
        sha256: c8357067db85d5b6b92e866bc51c7b30b6d7806b42bbdaabadbfb71316e370fb
        only-arches: [x86_64]
        dest-filename: OverBind.deb
      #- type: file
        #url: https://raw.githubusercontent.com/Twig6943/OverBindFlatpak/refs/heads/main/io.github.cjonas1999.overbind.metainfo.xml
        #sha256: 6873a393c06427a4bf9ef02d13398055c56f62cf306275855df278aaad820995

    build-commands:
       - ar -x OverBind.deb
       - tar -xf data.tar.gz
       - mkdir -p /app/bin
       - cp -r usr/bin/* /app/bin
       - install -Dm644 usr/share/icons/hicolor/32x32/apps/OverBind.png /app/share/icons/hicolor/32x32/apps/io.github.cjonas1999.overbind.png
       - install -Dm644 usr/share/icons/hicolor/128x128/apps/OverBind.png /app/share/icons/hicolor/128x128/apps/io.github.cjonas1999.overbind.png
       - install -Dm644 usr/share/icons/hicolor/256x256@2/apps/OverBind.png /app/share/icons/hicolor/256x256/apps/io.github.cjonas1999.overbind.png

       - install -Dm644 usr/lib/OverBind/icons/tray_icon_on.png /app/share/OverBind/icons/tray_icon_on.png
       - install -Dm644 usr/lib/OverBind/icons/tray_icon_off.png /app/share/OverBind/icons/tray_icon_off.png

       - install -Dm644 usr/share/applications/OverBind.desktop /app/share/applications/io.github.cjonas1999.overbind.desktop
       #- install -Dm644 io.github.cjonas1999.overbind.metainfo.xml /app/share/metainfo/io.github.cjonas1999.overbind.metainfo.xml
